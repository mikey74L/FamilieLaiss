@using FamilieLaissEnums
@using FamilieLaissInterfaces.Models.Data
@using FamilieLaissResources.Resources.Controls.VideoControl
@using FamilieLaissSharedUI.Components
@using FamilieLaissFrontend.Client.ViewModels.Controls.VideoControl

@inherits FlComponentBase<VideoControlInfoViewModel>

<MudGrid Spacing="1">
    @if (ShowSkeleton)
    {
        <!-- Skeleton für Hinzufüge-Datum -->
        @if (ControlType != EnumVideoControlType.Choose)
        {
            <MudItem xs="6">
                <MudSkeleton SkeletonType="SkeletonType.Text" Width="70%" />
            </MudItem>
            <MudItem xs="6">
                <MudSkeleton SkeletonType="SkeletonType.Text" Width="70%" />
            </MudItem>
        }

        <!-- Skeleton für Auflösung -->
        <MudItem xs="6">
            <MudSkeleton SkeletonType="SkeletonType.Text" Width="70%" />
        </MudItem>
        <MudItem xs="6">
            <MudSkeleton SkeletonType="SkeletonType.Text" Width="70%" />
        </MudItem>

        <!-- Skeleton für Laufzeit -->
        <MudItem xs="6">
            <MudSkeleton SkeletonType="SkeletonType.Text" Width="70%" />
        </MudItem>
        <MudItem xs="6">
            <MudSkeleton SkeletonType="SkeletonType.Text" Width="70%" />
        </MudItem>
    }

    <!-- Ausgeben des Hinzufüge-Datums, nur wenn es sich um ein Media-Item handelt-->
    @if (MediaItem?.CreateDate is not null)
    {
        <MudItem xs="6">
            <MudText>@VideoControlInfoRes.LabelAddDate:</MudText>
        </MudItem>
        <MudItem xs="6">
            <MudText>@MediaItem.CreateDate.Value.LocalDateTime</MudText>
        </MudItem>
    }

    <!-- Ausgeben des Hochladedatums -->
    @if (ControlType != EnumVideoControlType.MediaItemBaseData && ControlType != EnumVideoControlType.Choose && UploadItem?.CreateDate != null)
    {
        <MudItem xs="6">
            <MudText>@VideoControlInfoRes.LabelUploadDatum:</MudText>
        </MudItem>
        <MudItem xs="6">
            <MudText>@UploadItem.CreateDate.Value.LocalDateTime</MudText>
        </MudItem>
    }

    <!-- Ausgeben der Auflösung -->
    @if (UploadItem is not null)
    {
        var resolution = $"{ViewModel.Model?.Width} x {ViewModel.Model?.Height}";
        <MudItem xs="6">
            <MudStack Style="height: 100%;" Justify="Justify.Center">
                <MudText>@VideoControlInfoRes.LabelVideoSize:</MudText>
            </MudStack>
        </MudItem>
        <MudItem xs="6">
            <MudTooltip Text="@resolution" Placement="Placement.Top" Arrow="true">
                <MudImage Height="30" Src="@ViewModel.UrlForResolutionPng" Elevation="25"></MudImage>
            </MudTooltip>
        </MudItem>
    }

    <!-- Ausgeben der Laufzeit -->
    @if (UploadItem is not null)
    {
        <MudItem xs="6">
            <MudText>@VideoControlInfoRes.LabelVideoDuration:</MudText>
        </MudItem>
        <MudItem xs="6">
            <MudText>@UploadItem.VideoLength</MudText>
        </MudItem>
    }
</MudGrid>

@code
{
    [Parameter]
    [EditorRequired]
    public bool ShowSkeleton { get; set; }

    [Parameter]
    [EditorRequired]
    public EnumVideoControlType ControlType { get; set; }

    [Parameter]
    public IUploadVideoModel? UploadItem
    {
        get => ViewModel.Model;
        set => ViewModel.Model = value;
    }

    [Parameter]
    public IMediaItemModel? MediaItem { get; set; }
}